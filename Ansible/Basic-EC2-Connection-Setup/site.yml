---
- name: Install Apache (httpd) and deploy custom web page
  hosts: web
  become: yes

  tasks:
    - name: Ensure Apache is installed
      package:
        name: httpd
        state: present

    - name: Ensure Apache is started and enabled
      service:
        name: httpd
        state: started
        enabled: yes

    - name: Replace default index.html with custom content
      copy:
        dest: /var/www/html/index.html
        content: |
          <html>
          <head><title>KubonTech</title></head>
          <body style="font-family:sans-serif; text-align:center; margin-top:15%;">
            <h1>ðŸš€ Subscribe KubonTech</h1>
            <p>Powered by Ansible on AWS EC2</p>
          </body>
          </html>

    - name: Restart Apache 
      service:
        name: httpd
        state: restarted
        enabled: yes
